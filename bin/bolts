#!/usr/bin/env node

var _ = require('lodash'),
	bolts = require('..'),
	program = require('commander');

program
	.version(require('../package').version, '-v, --version')
	.description('Bootstrap a node.js project')
	.usage('[options]')
	.option('-d, --description <description>', 'Description of the project')
	.option('-f, --force', 'Overwrite existing project if present')
	.option('-e, --email <email>', 'You email address')
	.option('-g, --github <github>', 'Your github username')
	.option('-p, --project <project>', 'Name of the project')
	.option('-n, --name <name>', 'Your full name')
	.option('-u, --url <url>', 'URL of the project')
	.option('-y, --year <year>', 'Year to use for copyright', new Date().getFullYear());

program.parse(process.argv);

if (!_.isString(program.description)) {
	program.description = '';
}

bolts(program, function(err, results) {
	if (err) {
		if (!/canceled/.test(err)) {
			console.error('error: ' + err);
		}
		process.exit(1);
	}
	console.log('\nnode.js module ' + program.project.cyan + ' has been created ' + 'successfully'.green);
	console.log('');
	console.log('Optional follow-up steps:');
	console.log('  1. Create a new repo on github: ' + 'https://github.com/new'.cyan);
	console.log('  2. Setup Travis CI: ' + 'http://docs.travis-ci.com/user/getting-started/'.cyan);
});
